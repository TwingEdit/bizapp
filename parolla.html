<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BizApp - Parolla</title>
  <style>
    :root {
      --bg: #121213;
      --text: #d7dadc;
      --correct: #6aaa64;
      --wrong: #ff4d6d;
      --active: #4cc9f0;
      --passed: #f9c74f;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin: 0;
      padding: 10px;
      height: 100vh;
      overflow: hidden;
    }

    /* SARSINTI ANİMASYONU */
    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-8px); }
      50% { transform: translateX(8px); }
      75% { transform: translateX(-8px); }
      100% { transform: translateX(0); }
    }

    .shake-effect {
      animation: shake 0.3s ease-in-out;
    }

    #wheel-container { position: relative; width: 310px; height: 310px; margin-bottom: 20px; flex-shrink: 0; }
    
    .letter {
      position: absolute; width: 32px; height: 32px; border-radius: 50%;
      background: #3a3a3c; display: flex; align-items: center; justify-content: center;
      font-weight: bold; font-size: 13px; transition: 0.3s; color: white;
    }
    
    .active { background: var(--active); transform: scale(1.3); box-shadow: 0 0 15px var(--active); z-index: 5; }
    .correct { background: var(--correct) !important; }
    .wrong { background: var(--wrong) !important; }
    .passed { background: var(--passed) !important; color: #333; }

    #question-card { width: 100%; max-width: 600px; display: flex; flex-direction: column; align-items: center; }

    #question-text {
      font-size: 24px;
      font-weight: 800;
      line-height: 1.3;
      text-transform: uppercase;
      margin-bottom: 20px;
      min-height: 80px;
      text-align: center;
    }

    input {
      width: 80%;
      padding: 15px;
      background: transparent;
      border: none;
      border-bottom: 2px solid #3a3a3c;
      color: white;
      font-size: 20px;
      text-align: center;
      text-transform: uppercase;
      outline: none;
      transition: border-color 0.3s;
    }

    #warning-msg { color: var(--wrong); font-size: 14px; height: 20px; margin-top: 5px; font-weight: bold; }

    .btn-group { display: flex; gap: 20px; width: 80%; justify-content: center; margin-top: 10px; }
    button { flex: 1; padding: 15px; border-radius: 8px; border: none; font-weight: bold; cursor: pointer; text-transform: uppercase; font-size: 16px; }
    .btn-check { background: var(--correct); color: white; }
    .btn-pass { background: var(--passed); color: #333; }

    .results-overlay {
      position: fixed; top:0; left:0; width:100%; height:100%;
      background: var(--bg); display: none; flex-direction: column;
      align-items: center; padding: 20px; overflow-y: auto; z-index: 100;
    }
    .result-item { 
      margin: 5px 0; font-size: 14px; width: 100%; max-width: 400px; 
      display: flex; justify-content: space-between; border-bottom: 1px solid #333; padding: 8px; 
    }
  </style>
</head>
<body>

  <div id="wheel-container"></div>

  <div id="question-card">
    <div id="question-text">YÜKLENİYOR...</div>
    <div style="width: 100%; display: flex; flex-direction: column; align-items: center;">
      <input type="text" id="answer-input" placeholder="CEVABI YAZIN" autocomplete="off">
      <div id="warning-msg"></div>
    </div>
    <div class="btn-group">
      <button class="btn-pass" onclick="handlePass()">PAS</button>
      <button class="btn-check" onclick="handleCheck()">CEVAPLA</button>
    </div>
  </div>

  <div id="results-screen" class="results-overlay">
    <h2 style="color: var(--active)">YARIŞMA SONUCU</h2>
    <div id="stats-summary" style="font-size: 20px; margin-bottom: 20px; font-weight: bold;"></div>
    <div id="answers-list" style="width: 100%; display: flex; flex-direction: column; align-items: center;"></div>
    <button onclick="location.reload()" style="margin-top:20px; background:var(--active); color:white; width:200px;">YENİDEN OYNA</button>
  </div>

<script>
const alphabet = ["A", "B", "C", "Ç", "D", "E", "F", "G", "H", "I", "İ", "J", "K", "L", "M", "N", "O", "Ö", "P", "R", "S", "Ş", "T", "U", "Ü", "V", "Y", "Z"];

const questionBank = {
  "A": [{q: "Işık saçacak beyazlığa varıncaya kadar ısıtılmış olan?", a: "AKKOR"}],
  "B": [{q: "Geleceği önceden bildirdiğine inanılan işaret?", a: "BELİRTİ"}],
  "C": [{q: "Topluluk içinde uyulması gereken nezaket?", a: "CANLILIK"}], 
  "Ç": [{q: "Toprağı kazmak için kullanılan tarım aracı?", a: "ÇAPA"}],
  "D": [{q: "Doğa olaylarını inceleyen bilim dalı?", a: "DOĞA"}],
  "E": [{q: "Bir işi yapmak için gereken güç?", a: "ENERJİ"}],
  "F": [{q: "Düşünce, görüş, kanı?", a: "FİKİR"}],
  "G": [{q: "Isı ve ışık kaynağı olan yıldızımız?", a: "GÜNEŞ"}],
  "H": [{q: "Canlıların yaşamını sürdürdüğü doğal ortam?", a: "HABİTAT"}],
  "I": [{q: "Cisimleri görmemizi sağlayan fiziksel enerji?", a: "IŞIK"}],
  "İ": [{q: "Duygu ve düşüncelerin aktarılması süreci?", a: "İLETİŞİM"}],
  "J": [{q: "Otomobil tekerleğinin metal kısmı?", a: "JANT"}],
  "K": [{q: "Dünyayı çevreleyen gaz tabakası?", a: "KATMAN"}],
  "L": [{q: "Gemilerin yanaştığı, yük alıp boşalttığı yer?", a: "LİMAN"}],
  "M": [{q: "Küçük varlıkları görmeyi sağlayan araç?", a: "MİKROSKOP"}],
  "N": [{q: "Yaşam için gerekli temel gaz?", a: "NEFES"}],
  "O": [{q: "Kıtaları birbirinden ayıran devasa su kütlesi?", a: "OKYANUS"}],
  "Ö": [{q: "Bir nesneyi başkalarından ayıran hal?", a: "ÖZELLİK"}],
  "P": [{q: "Arka yüzü gümüşlenmiş cam?", a: "PARLAK"}],
  "R": [{q: "Basınç farkından doğan hava akımı?", a: "RÜZGAR"}],
  "S": [{q: "Yere düşen su damlaları?", a: "SAĞANAK"}],
  "Ş": [{q: "Yönetim merkezi?", a: "ŞEHİR"}],
  "T": [{q: "Geçmişten kalan kalıntı?", a: "TARİH"}],
  "U": [{q: "Dünya dışındaki boşluk?", a: "UZAY"}],
  "Ü": [{q: "İnsan topluluğu?", a: "ÜLKE"}],
  "V": [{q: "Hastalık yapan mikrop?", a: "VİRÜS"}],
  "Y": [{q: "Gökten düşen su?", a: "YAĞMUR"}],
  "Z": [{q: "Olayların aktığı süreç?", a: "ZAMAN"}]
};

let currentIndex = 0;
let sessionQuestions = {};
let results = {};

function initGame() {
  const container = document.getElementById("wheel-container");
  const radius = 130;
  alphabet.forEach((letter, i) => {
    const options = questionBank[letter] || [{q: "Soru yok", a: "HATA"}];
    sessionQuestions[letter] = options[Math.floor(Math.random() * options.length)];
    const angle = (i / alphabet.length) * (2 * Math.PI) - (Math.PI / 2);
    const x = 155 + radius * Math.cos(angle) - 16;
    const y = 155 + radius * Math.sin(angle) - 16;
    const div = document.createElement("div");
    div.className = "letter"; div.id = `l-${letter}`; div.innerText = letter;
    div.style.left = `${x}px`; div.style.top = `${y}px`;
    container.appendChild(div);
  });
  updateUI();
}

function updateUI() {
  const letter = alphabet[currentIndex];
  document.querySelectorAll(".letter").forEach(el => el.classList.remove("active"));
  document.getElementById(`l-${letter}`).classList.add("active");
  document.getElementById("question-text").innerText = sessionQuestions[letter].q;
  document.getElementById("warning-msg").innerText = "";
  const input = document.getElementById("answer-input");
  input.focus();
}

window.handleCheck = function() {
  const inputEl = document.getElementById("answer-input");
  const input = inputEl.value.trim().toUpperCase();
  const letter = alphabet[currentIndex];
  
  if (input === "") return;

  // HARF KONTROLÜ VE TİTREME EFEKTİ
  if (!input.startsWith(letter)) {
    document.getElementById("warning-msg").innerText = `CEVAP "${letter}" İLE BAŞLAMALI!`;
    
    // Titreme efektini tetikle
    inputEl.classList.add("shake-effect");
    inputEl.style.borderColor = "var(--wrong)";
    
    // 300ms sonra efekti kaldır ki tekrar çalışabilsin
    setTimeout(() => {
      inputEl.classList.remove("shake-effect");
      inputEl.style.borderColor = "#3a3a3c";
    }, 300);
    
    return;
  }

  const el = document.getElementById(`l-${letter}`);
  const correctAns = sessionQuestions[letter].a.toUpperCase();

  if (input === correctAns) {
    el.classList.add("correct");
    results[letter] = {status: "correct", userAns: input, correctAns: correctAns};
  } else {
    el.classList.add("wrong");
    results[letter] = {status: "wrong", userAns: input, correctAns: correctAns};
  }
  
  inputEl.value = "";
  moveToNext();
};

window.handlePass = function() {
  const letter = alphabet[currentIndex];
  document.getElementById(`l-${letter}`).classList.add("passed");
  document.getElementById("answer-input").value = "";
  moveToNext();
};

function moveToNext() {
  let count = 0;
  while (count < alphabet.length) {
    currentIndex = (currentIndex + 1) % alphabet.length;
    const el = document.getElementById(`l-${alphabet[currentIndex]}`);
    if (!results[alphabet[currentIndex]] && !el.classList.contains("passed")) {
      updateUI();
      return;
    }
    count++;
  }
  
  count = 0;
  while (count < alphabet.length) {
    if (!results[alphabet[currentIndex]]) {
        updateUI();
        return;
    }
    currentIndex = (currentIndex + 1) % alphabet.length;
    count++;
  }
  showFinalResults();
}

function showFinalResults() {
  document.getElementById("results-screen").style.display = "flex";
  const stats = document.getElementById("stats-summary");
  const list = document.getElementById("answers-list");
  let c = 0, w = 0, p = 0;
  list.innerHTML = "";
  alphabet.forEach(l => {
    const res = results[l];
    const item = document.createElement("div");
    item.className = "result-item";
    if (res?.status === "correct") {
        c++;
        item.innerHTML = `<span><b>${l}</b>: ${res.correctAns}</span> <span style="color:var(--correct)">DOĞRU (${res.userAns})</span>`;
    } else if (res?.status === "wrong") {
        w++;
        item.innerHTML = `<span><b>${l}</b>: ${res.correctAns}</span> <span style="color:var(--wrong)">YANLIŞ (Sen: ${res.userAns})</span>`;
    } else {
        p++;
        item.innerHTML = `<span><b>${l}</b>: ${sessionQuestions[l].a}</span> <span style="color:var(--passed)">PAS</span>`;
    }
    list.appendChild(item);
  });
  stats.innerHTML = `✅ ${c} DOĞRU | ❌ ${w} YANLIŞ | ⏳ ${p} PAS`;
}

document.getElementById("answer-input").addEventListener("keypress", (e) => { if (e.key === "Enter") handleCheck(); });
initGame();
</script>
</body>
</html>
